(()=>{"use strict";const e=e=>{var r;const l=e.dataset.id,a=e.querySelector('[name="name"]');let o=null!==(r=a?.value.trim())&&void 0!==r?r:"";a&&(o||(o=`${l}-${Math.floor(1e3*Math.random())}`),a.value=o),e.querySelectorAll(".tag").forEach((r=>{let l=e.querySelector('[name="tagtype"]')?.value||r.getAttribute("name");l&&e.querySelector('[name="required"]:checked')&&(l+="*"),r.value=t(l,e)})),e.querySelectorAll("span.mail-tag").forEach((e=>{e.innerText=`[${o}]`})),e.querySelectorAll("input.mail-tag").forEach((e=>{e.value=`[${o}]`}))},t=(e,t)=>{var r;return`[${(e+" "+(null!==(r=t.querySelector('[name="name"]')?.value)&&void 0!==r?r:"")).trim()}]`};document.querySelectorAll("#tag-generator-list button").forEach((t=>{t.addEventListener("click",(r=>{const l=document.querySelector(`#${t.dataset.target}`);if(l){const t=l.querySelector("form.tag-generator-panel");t&&"1"===t.dataset.version&&(t=>{e(t),t.querySelectorAll(".control-box").forEach((r=>{r.addEventListener("change",(r=>{r.target,e(t)}))}))})(t),l.showModal()}}))})),document.querySelectorAll("dialog.tag-generator-dialog").forEach((e=>{e.querySelectorAll(".close-modal").forEach((t=>{t.addEventListener("click",(t=>e.close("")))})),e.querySelectorAll(".insert-tag").forEach((t=>{t.addEventListener("click",(t=>{const r=e.querySelector(".tag");e.close(r?.value)}))})),e.addEventListener("close",(t=>{var r;const l=document.querySelector("textarea#wpcf7-form");if(null===l)return;if(""===e.returnValue)return;const a=null!==(r=l.selectionEnd)&&void 0!==r?r:0;0===a&&(e.returnValue+="\n\n"),l.value=l.value.substring(0,a)+e.returnValue+l.value.substring(a),l.selectionStart=a,l.selectionEnd=a+e.returnValue.length,l.focus()}))}))})();