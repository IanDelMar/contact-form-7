(()=>{"use strict";const e=e=>{e&&document.querySelector(`.contact-form-editor-panel#${e}`)&&(document.querySelector("#contact-form-editor")?.setAttribute("data-active-tab",e),document.querySelectorAll('input[name="active-tab"]').forEach((t=>{t.value=e})),document.querySelectorAll("#contact-form-editor-tabs li").forEach((t=>{t.dataset?.panel===e?(t.classList.add("active"),t.setAttribute("tabindex","0"),t.focus()):(t.classList.remove("active"),t.setAttribute("tabindex","-1"))})),document.querySelectorAll(".contact-form-editor-panel").forEach((t=>{t.id===e?(t.classList.add("active"),t.style.setProperty("display","block")):(t.classList.remove("active"),t.style.setProperty("display","none"))})))},t=document.querySelector("#wpcf7-welcome-panel"),a=e=>{const a=t.querySelector("#welcomepanelnonce")?.value;if(!a)return;const l=new FormData;l.append("action","wpcf7-update-welcome-panel"),l.append("visible",e),l.append("welcomepanelnonce",a),fetch(new Request(ajaxurl,{method:"POST",body:l})),e?t.classList.remove("hidden"):t.classList.add("hidden")},l=e=>{var t;const a=e.dataset.id,l=e.querySelector('[name="name"]');let o=null!==(t=l?.value.trim())&&void 0!==t?t:"";l&&(o||(o=`${a}-${Math.floor(1e3*Math.random())}`),l.value=o),e.querySelectorAll(".tag").forEach((t=>{const a=e.querySelector('[name="tagtype"]')?.value||t.name;a&&(t.value=r(a,e))})),e.querySelectorAll("span.mail-tag").forEach((e=>{e.innerText=`[${o}]`})),e.querySelectorAll("input.mail-tag").forEach((e=>{e.value=`[${o}]`}))},r=(e,t)=>{var a,l,r;const o=null!==(a=t.querySelector(`.scope.${e}`))&&void 0!==a?a:t,c=e+(t.querySelector('[name="required"]:checked')?"*":""),n=null!==(l=t.querySelector('[name="name"]')?.value)&&void 0!==l?l:"",i=[];o.querySelectorAll(".option").forEach((e=>{"checkbox"===e.type?e.checked&&i.push(e.name):"radio"===e.type?e.checked&&!e.classList.contains("default")&&i.push(`${e.name}:${e.value}`):""!==e.value&&(e.classList.contains("filetype")?i.push(`${e.name}:${e.value.split(/[,|\s]+/).join("|")}`):e.classList.contains("color")?i.push(`${e.name}:#${e.value}`):"class"===e.name?e.value.split(" ").forEach((e=>{i.push(`class:${e}`)})):i.push(`${e.name}:${e.value}`))})),"radio"===e&&i.push("default:1");const s=null!==(r=o.querySelector('[name="values"]')?.value.split("\n").map((e=>e.trim())).filter((e=>""!==e)).map((e=>`"${e.replace(/["]/g,"&quot;")}"`)))&&void 0!==r?r:[],u=[c,n,i.join(" "),s.join(" ")].map((e=>e.trim())).filter((e=>""!==e)),d=o.querySelector('[name="content"]')?.value.trim();return d?`[${u.join(" ")}] ${d} [/${c}]`:`[${u.join(" ")}]`},o=e=>{const t=c(e);t?(e.querySelectorAll('[data-tag-part="tag"]').forEach((e=>{e.value=t})),e.querySelectorAll('[data-taggen="insert-tag"]').forEach((e=>{e.disabled=!1})),e.querySelectorAll('[data-tag-part="mail-tag"]').forEach((t=>{const a=e.querySelector('[data-tag-part="name"]');a&&(t.innerText=`[${a.value.trim()}]`)}))):(e.querySelectorAll('[data-tag-part="tag"]').forEach((e=>{e.value=""})),e.querySelectorAll('[data-taggen="insert-tag"]').forEach((e=>{e.disabled=!0})))},c=e=>{var t,a;const l=e.querySelector('[data-tag-part="basetype"]')?.value.trim();if(!l)return;if(e.querySelector(":invalid"))return;let r=l;const o=e.querySelector('[data-tag-part="type-suffix"]');o&&(["checkbox","radio"].includes(o?.type)?r+=o.checked?o.value.trim():"":r+=o.value.trim());const c=e.querySelector('[data-tag-part="name"]');let n=null!==(t=c?.value.trim())&&void 0!==t?t:"";c&&(n||(n=`${l}-${Math.floor(1e3*Math.random())}`),c.value=n);const i=[];e.querySelectorAll('[data-tag-part="option"]').forEach((e=>{const t=e.dataset.tagOption?.trim();t&&(["checkbox","radio"].includes(e?.type)&&!e.checked||t.split(" ").forEach((t=>{t.endsWith(":")?e.value?.split(" ").forEach((e=>{(e=e.trim())&&i.push(t+e)})):i.push(t)})))}));const s=null!==(a=e.querySelector('[data-tag-part="value"]')?.value.split("\n").map((e=>e.trim())).filter((e=>""!==e)).map((e=>`"${e.replace(/["]/g,"&quot;")}"`)))&&void 0!==a?a:[],u=[r,n,i.join(" "),s.join(" ")].map((e=>e.trim())).filter((e=>""!==e)),d=e.querySelector('[data-tag-part="content"]')?.value.trim();return d?`[${u.join(" ")}] ${d} [/${r}]`:`[${u.join(" ")}]`};document.addEventListener("DOMContentLoaded",(r=>{document.querySelectorAll("#contact-form-editor-tabs li").forEach((t=>{t.addEventListener("click",(a=>{e(t.dataset?.panel),a.preventDefault()})),t.addEventListener("keyup",(a=>{if(["ArrowDown","ArrowRight"].includes(a.key)){const a=t.nextElementSibling;a&&e(a.dataset?.panel)}if(["ArrowUp","ArrowLeft"].includes(a.key)){const a=t.previousElementSibling;a&&e(a.dataset?.panel)}}))})),document.querySelectorAll(".contact-form-editor-panel").forEach((e=>{e.classList.contains("active")?document.querySelector("#contact-form-editor")?.setAttribute("data-active-tab",e.id):e.style.setProperty("display","none")})),(()=>{if(!t)return;const e=document.querySelector("#wpcf7-welcome-panel-show");t.querySelectorAll(".welcome-panel-close").forEach((t=>{t.addEventListener("click",(t=>{a(0),e?.removeAttribute("checked"),t.preventDefault()}))})),e?.addEventListener("click",(t=>{a(e?.checked?1:0)}))})(),document.querySelectorAll('[data-taggen="open-dialog"]').forEach((e=>{e.addEventListener("click",(t=>{const a=document.querySelector(`#${e.dataset.target}`);if(a){const e=a.querySelector("form.tag-generator-panel");e&&("1"===e.dataset.version?(e=>{l(e),e.querySelectorAll(".control-box").forEach((t=>{t.addEventListener("change",(t=>{var a;"name"===(a=t.target).name&&(a.value=a.value.replace(/[^0-9a-zA-Z:._-]/g,"").replace(/^[^a-zA-Z]+/,"")),a.classList.contains("numeric")&&(a.value=a.value.replace(/[^0-9.-]/g,"")),a.classList.contains("idvalue")&&(a.value=a.value.replace(/[^-0-9a-zA-Z_]/g,"")),a.classList.contains("classvalue")&&(a.value=a.value.split(" ").map((e=>e.replace(/[^-0-9a-zA-Z_]/g,""))).join(" ").replace(/\s+/g," ").trim()),a.classList.contains("color")&&(a.value=a.value.replace(/[^0-9a-fA-F]/g,"")),a.classList.contains("filesize")&&(a.value=a.value.replace(/[^0-9kKmMbB]/g,"")),a.classList.contains("filetype")&&(a.value=a.value.replace(/[^0-9a-zA-Z.,|\s]/g,"")),a.classList.contains("date")&&(a.value.match(/^\d{4}-\d{2}-\d{2}$/)||(a.value="")),"values"===a.name&&(a.value=a.value.trim()),l(e)}))}))})(e):"2"===e.dataset.version&&(e=>{var t;null!==(t=e.reset())&&void 0!==t||o(e),e.querySelectorAll(".control-box").forEach((t=>{t.addEventListener("change",(t=>{o(e)})),t.addEventListener("keyup",(t=>{var a;"text"!==(null!==(a=t.target.type)&&void 0!==a?a:"")&&"textarea"!==t.target.tagName?.toLowerCase()||o(e)}))}))})(e)),a.showModal()}}))})),document.querySelectorAll("dialog.tag-generator-dialog").forEach((e=>{e.querySelectorAll('[data-taggen="close-dialog"]').forEach((t=>{t.addEventListener("click",(t=>e.close("")))})),e.querySelectorAll('[data-taggen="insert-tag"], .insert-tag').forEach((t=>{t.addEventListener("click",(t=>{const a=e.querySelector('[data-tag-part="tag"], .tag');e.close(a?.value)}))})),e.addEventListener("close",(t=>{var a;const l=document.querySelector("textarea#wpcf7-form");if(null===l)return;if(""===e.returnValue)return;const r=null!==(a=l.selectionEnd)&&void 0!==a?a:0;0===r&&(e.returnValue+="\n\n"),l.value=l.value.substring(0,r)+e.returnValue+l.value.substring(r),l.selectionStart=r,l.selectionEnd=r+e.returnValue.length,l.focus()}))}))}))})();